service: Blossomdlm
frameworkVersion: '3'

provider:
  name: aws
  runtime: nodejs16.x
  memorySize: 2048
  stage: production
  timeout: 15
  region: us-east-2

Resources:
  ApiGatewayApi:
    Type: AWS::Serverless::Api
    Properties:
      StageName: Prod
      Cors:
        AllowMethods: "'DELETE, GET, HEAD, OPTIONS, PATCH, POST, PUT'"
        AllowHeaders: "'*'"
        AllowOrigin: "'https://blossom.nabhdlm.tk'"
        MaxAge: "'600'"
        AllowCredentials: false

functions:
  api:
    handler: lambda.handler
    events:
        - http: ANY /{proxy+}
        - http: ANY /          
        - schedule:
            rate: cron(0 1 * * ? *)
            enabled: true
    environment:
          DB_URL: mongodb+srv://Nabh:Nabh123@cluster0.rbcigf9.mongodb.net/nabh-dlm
