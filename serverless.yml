service: Blossomdlm
frameworkVersion: '3'

provider:
  name: aws
  runtime: nodejs16.x
  memorySize: 2048
  stage: production
  timeout: 15
  region: us-east-2

resources:
   Resources:
     GatewayResponseDefault4XX:
       Type: 'AWS::ApiGateway::GatewayResponse'
       Properties:
         ResponseParameters:
           gatewayresponse.header.Access-Control-Allow-Origin: "'*'"
           gatewayresponse.header.Access-Control-Allow-Headers: "'*'"
         ResponseType: DEFAULT_4XX
         RestApiId:
           Ref: 'ApiGatewayRestApi'

functions:
  api:
    handler: lambda.handler
    events:
        - http:
            path: /
            method: ANY
            cors: true
        - http: 
            path: /{proxy+}
            method: ANY
            cors: true          
        - schedule:
            rate: cron(0 1 * * ? *)
            enabled: true
    environment:
          DB_URL: mongodb+srv://Nabh:Nabh123@cluster0.rbcigf9.mongodb.net/nabh-dlm
